# 第七章，应用设计工具

本章为手机应用开发者介绍了一些有用的工具，包含了可以在一般手机操作系统上使用的代码案例，可以用于模拟实际BLE设备的便宜的硬件平台（如果在初期应用开发阶段你没有自己的硬件，这回是很有用的），以及一些纯粹帮助调试和开发应用的软件工具。

## 蓝牙应用加速器

BLE已经深深进入了移动计算领域，尤其是移动手机和平板，被用于传统桌面电脑和笔记本电脑，特别是在*人体接口设备（human interface device, HID）*的类别上，如鼠标和键盘。为了区分这些，蓝牙SIG引入了蓝牙应用加速器（Bluetooth Application Accelerator），为让BLE耿容易被应用设计师所接受。

应用加速器本质上为一套软件代码范例，这使得在iOS、Android和Windows RT 8.1平台上开发基本BLE应用相对简化。应用加速器也包含了展示如何连接和用GATT服务和特征工作的简单的代码范例。

当然对于指定平台的知识是需要具备的，但是范例大大简化开始启动BLE调用并询问指定从机设备的时间。程序需要进行注册，但是不收费用。更多细节，请见[蓝牙开发者平台](http://bit.ly/1kQPQuv)；

## SensorTag

如今许多人会将德州仪器（TI）与硬件设计联系在一起，作为自身BLE开发环境的一部分。TI事放了一个非常吸引人并低成本的BLE开发工具，称之为SensorTag（图7-1），这个对于手机应用开发者来说非常的实用。

![figure7-1](./pic/figure7-1.png)

*图7-1. 德州仪器的SensorTag BLE设备*

对于大部分BLE使用场景，手机应用通常只有半个画面，并需要硬件让应用进行交互。但是硬件在早期开发过程中可能无法使用，或者如果你仅对在手机平台学习使用BLE API进行开发感兴趣，你可以不用知道哪里去找一个设备进行通讯。

SensorTag通过提供一套相当便宜而易组装的传感器套件来解决这个问题，提供了包括iOS和Android平台展示如何使用这些传感器交互的应用范例。

自供电的BLE SensorTag平台包含了一下传感器：

- 温度传感器
- 湿度传感器
- 压力传感器
- 加速度传感器
- 陀螺仪
- 磁力传感器

这传感器的结合打开了一组唯一的数据采集和富用户交互的机会。加速度传感器和磁力传感器可以结合去采集精确的三轴旋转数据，压力传感器可以检测手机往上、下移动时海拔上的改变等等。

更重要的是，SensorTag平台允许应用开发者与真实硬件通讯，用最小代价获取实时传感器数据，而不需要了解如何设计从设备或者朝着应用进展时候等待这个项目的其他专家研发硬件设备。

更多细节，或者购买设备，请访问TI的[SensorTag产品页面](http://www.ti.com/tool/cc2541dk-sensor)。

## iOS端的LightBlue

许多手机应用开发者可能对设计他们自有的BLE硬件没有兴趣，但是相反希望与市面上已存在的BLE从设备进行通讯。

当[第六章](./chapter6.md)讨论的调试工具对应用设计师不再有效时，任何使用最新iOS设备的人都可以使用一个被称为LightBlue的非常好用的工具。这个免费的在[苹果应用市场上线](http://bit.ly/1hq3m9j)应用，可以用于逆向工程或者甚至模拟iPhone、iPad的任意BLE从设备。

你可以使用LightBlue去与一个设备发现的服务和特征交互，如读写自有数值。你也可以使用它去获取一个已存在的BLE从设备的唯一签名，之后将该签名用于开发目的，根本上模仿一个你可能无法天天使用的设备。

如果你知道设备应该长什么样，但是实际硬件却无法使用，你也可以创建一个配置文件去模拟你的从设备，并且创建一个看起来完全一样的设备，如图7-2展示。

一个给OS X的LightBlue的版本在苹果应用市场已经可以使用，虽然此时iOS的版本提供更多功能。

当开发一个BLE从设备时，应用开发者也可以使用LightBlue在iOS或者Android应用的副本完成之后。你可以在中心设备和从设备间模拟无线通讯，让你无需研发一个在中心设备使用的通用应用来调试从设备固件。

![figure7-2](./pic/figure7-2.png)

*图7-2. LightBlue展示了一个模拟在另一个LightBlue上的BLE设备*

## 安卓端nRF主控制面板

如果你在一个设备上正运行支持BLE的Android4.3或者更高的版本的Android，诺迪克的主控制面板（Nordic's Master Control Panel）可以进行调试、逆向工程，或者与已存在BLE硬件在易操作的UI上面进行交互。

你可以从[谷歌Play Store](http://bit.ly/1n13gYS)进行下载这个免费的工具，并寻找任意出现在附近的BLE从设备的服务和特征的UUID，订阅由特征发送的通知，或者写回数值到从设备，像LightBlue（参见前文[iOS端的LightBlue](#iOS端的LightBlue)）和PC端的主控制面板（参见第六章[PCA10000 USB Dongle 和 Master Control Panel](./chapter6.md#PCA10000-USB-Dongle和Master-Control-Panel)）一样的方式工作。

图7-3展示了一个心跳监控器服务的结果，该服务的身体传感器位置和心率检测数据都可见。

![figure7-3](./pic/figure7-3.png)

*图7-3. nRF主控制面板展示了一个心率监控器服务*

更多关于主控制面板应用和其他来自诺迪克半导体的Android应用都可以在[支持页面](http://bit.ly/1kQGE9s)查看。

